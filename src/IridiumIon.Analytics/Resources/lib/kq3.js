'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),KQUtils=function(){function KQUtils(){_classCallCheck(this,KQUtils)}return _createClass(KQUtils,null,[{key:'serialize',value:function serialize(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+'='+encodeURIComponent(a[c]));return b.join('&')}},{key:'mid',value:function mid(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+'-'+a()+'-'+a()+'-'+a()+'-'+a()+a()+a()}},{key:'sendPost',value:function sendPost(a,b,c){var f=new window.XMLHttpRequest;f.open('POST',a,!0),f.setRequestHeader('Content-type','application/x-www-form-urlencoded'),f.onload=function(){c&&c(this.responseText)},f.send(KQUtils.serialize(b))}}]),KQUtils}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}var KQApi=function(){function KQApi(){_classCallCheck(this,KQApi)}return _createClass(KQApi,null,[{key:'configure',value:function configure(a){this.kc=a}},{key:'sendHit',value:function sendHit(){KQUtils.sendPost(this.kc.s+'k',{u:this.kc.ul,sid:this.kc.sid})}},{key:'sendTag',value:function sendTag(a,b){KQUtils.sendPost(this.kc.s+'c',{u:this.kc.ul,sid:this.kc.sid,tag:a,data:b})}},{key:'sendTagData',value:function sendTagData(a,b){this.sendTag(a,JSON.stringify(b))}}]),KQApi}();KQApi.Events=function(){function _class(){_classCallCheck(this,_class)}return _createClass(_class,null,[{key:'click',value:function click(a){if(a=window.e||a,'A'===a.target.tagName){var _b=a.target,_c=new Date().toISOString();KQApi.sendTagData('linkClick',{tgt:_b.href,tx:_b.text,d:_c})}}}]),_class}();var sid=window.localStorage.getItem('sid')||KQUtils.mid();window.localStorage.setItem('sid',sid);var _kqd=window._kqd||{},kqs=_kqd.s;'/'!==kqs.substr(-1)&&(kqs+='/'),KQApi.configure({s:kqs,ul:_kqd.u,sid:_kqd.sid||sid}),KQApi.sendHit(),document.addEventListener?document.addEventListener('click',KQApi.Events.click,!1):document.attachEvent('onclick',KQApi.Events.click);
